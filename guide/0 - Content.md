Структура гайда по созданию фабрики QuantaPilot™

1. Цели и границы
   Кратко зафиксировать назначение, режимы, роли, HITL.

2. Окружение
   Установить Node 22, PNPM 10.14.0, Python 3.11, Docker, Postgres, n8n, sops/age, ajv-cli, jq, yq, gh.

3. Инициализация репозитория
   Скелет каталогов, базовые скрипты, лицензия, редакторконфиг.

4. Документация: скелет файлов
   Создать docs с файлами: README.md, ANCHOR.md, 00_overview.md, 10_architecture.md, 20_requirements.md, 30_milestones.md, 40_acceptance.md, 50_nonfunctional.md, 60_constraints.md, 70_runbook.md, 80_adrs.md, 90_api.md, 99_glossary.md, \_schemas/\*.json.

5. Документация: содержание и метаданные
   Задать фронтматтер, структуру разделов, правила именования, ссылки между файлами.

6. Документация: схемы и валидация
   Добавить JSON-схемы для фронтматтера, milestones, quantapilot.yml, api. Подключить ajv-cli и docs\:lint.

7. Документация: CI-гейты
   Включить проверку docs в CI, quality-gate, блокирующие статусы.

8. Секреты и .env.example
   Собрать переменные, включить sops/age, описать ротацию в README.md.

9. База данных
   docker-compose Postgres, миграции, сиды, линт миграций.

10. Политики данных
    RLS, маскирование, ретеншн, каталоги данных.

11. SLI/SLO/SLA
    Определить метрики, цели, error budget, таймауты.

12. Оркестратор n8n
    Развернуть, базовые креденшелы, роли, ретраи и паузы.

13. Интеграции
    GitHub App, Telegram канал, минимальные скоупы, вебхуки.

14. Артефакты целевых репозиториев
    Список генерируемых файлов и каталогов, правила версионирования.

15. Контракты агентов
    contracts/\*, step.manifest.json, инварианты ресурсов и бюджетов.

16. Реестр инференса и промптов
    ops/inference.yml, prompts/\*, версионирование и тесты.

17. Prompt-lint и стоимость
    Правила качества промптов, лимиты стоимости и дауншифт.

18. Ограничения рантайма
    Лимиты токенов, burst, попытки восстановления.

19. Диагностика и реплей
    Логи, repro.json, скрипт повторного прогона.

20. Политика качества и тесты
    ops/quality.yml, юнит, интеграционные, негативные, приёмочные.

21. Политики CI/CD и защита путей
    Подпись коммитов, защита workflows, статус-чеки.

22. RBAC для UI и API
    ops/ui-rbac.yml, guard на фронте, проверки JWT в API.

23. Моки и фикстуры
    mocks/, MSW, Postman коллекции.

24. UI-модули и критерии готовности
    Dashboard, TaskView, GateQueue, FlagsPanel, AuditLog, E2E по RBAC.

25. Аудит действий
    Трейл операторов, хеш-цепочки, отчёт в UI.

26. Откаты и cleanup
    LKG, revert PR, feature flags, canary, reversible миграции.

27. Наблюдаемость
    Метрики, алерты, панели управления, операции в n8n.

28. Запуск E2E
    Триггер repo_url, анализ README целевого проекта, цепочка Dev→QA→Gate.

29. Ранбук
    Сценарии онбординга и восстановлений, частые инциденты.

30. Пилот и критерии MVP
    Тестовый репозиторий, один закрытый milestone, уведомления и управление паузами.
