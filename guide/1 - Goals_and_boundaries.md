# №1. Цели и границы QuantaPilot™ — развернуто

1. Назначение фабрики
   В одном репозитории QuantaPilot хранятся оркестратор, контракты агентов и документация. Генерация кода и артефактов всегда происходит в целевом проекте по его README и quantapilot.yml. Режим — автономно с HITL-гейтами.

2. Целевые исходы (Outputs)

- Для целевого проекта: `ANCHOR.md`, `00_overview.md`…`99_glossary.md`, `_schemas/*.json`, PRы с кодом и тестами, CI-конфиги, ченджлоги.
- Для QuantaPilot: логи и реплеи (`app.run.diagnostics`), артефакты n8n (история задач, статусы гейтов), ADRs фабрики (`docs/80_adrs.md`), схемы и скрипты валидации.

3. Входы (Inputs)

- repo_url и branch целевого проекта.
- `README.md` целевого проекта как ТЗ.
- Опционально: `quantapilot.yml` в целевом проекте для настроек стека, лимитов, политик мержа.
- Организационные: GitHub App, Telegram канал для уведомлений, лимит токенов/дневной бюджет.

4. Роли и ответственность

- Operator: запускает пайплайн, управляет паузами/ретраями, принимает гейты.
- Reviewer/Gatekeeper: проверяет PR/док-изменения, ставит «approve» или «reject» с причинами.
- System (n8n + агенты): выполняет шаги Dev→QA→Gate, ведет аудит.
- Data Steward (по необходимости): проверяет PII/политику данных.

5. Область действия (Scope)

- Включено: анализ ТЗ, проектная документация, генерация кода, тесты, настройка базового CI, интеграции GitHub/Telegram, минимальная схема БД и миграции, E2E запуска пайплайна.
- Исключено: прод-хостинг целевого приложения, полный SecOps целевой инфраструктуры, NFR в прод-режиме (подробно в п.11 и п.26), SLA для конечных пользователей продукта.

6. Режим HITL и гейт-точки

- Обязательные гейты: принятие `ANCHOR.md`, приемка `30_milestones.md` M-001, слияние первого кода в default-ветку.
- Необязательные гейты: дорогостоящие промпты, смена модели, изменение CI policy, миграции схемы.
- Решения фиксируются в `docs/80_adrs.md` (фабрика) и в ADRs целевого проекта при необходимости.

7. Ограничения и допущения

- Один целевой проект обрабатывается изолированным пайплайном.
- Все изменения идут через PR. Прямые пуши запрещены.
- Конфигурирование ведется файлами, не через скрытые настройки.
- Модели и инструменты фиксируются по версиям (seed, model_version, параметры инференса) для воспроизводимости.

8. Метрики успеха шага №1

- Сформирована и принята документированная цель и границы (этот пункт).
- Создан скелет документации фабрики (см. п.9 ниже) без контента, только заголовки и фронтматтер.
- Определены роли и ответственные.
- Согласованы обязательные гейты и формат решений (ADRs).
- Зафиксированы входы/выходы, исключения и ограничения.

9. Артефакты документации фабрики (создаются пустыми шаблонами сейчас, содержание заполняется в следующих пунктах)

- `README.md` — обзор фабрики, как запускать и где смотреть статусы.
- `ANCHOR.md` — якорь контекста фабрики: цели, роли, гейты, входы/выходы, ссылки на остальные документы.
- `00_overview.md` — расширенный обзор и терминология фабрики.
- `10_architecture.md` — границы системы, контекстные диаграммы, n8n как оркестратор.
- `20_requirements.md` — функциональные/нефункциональные требования к фабрике.
- `30_milestones.md` — этапы внедрения фабрики.
- `40_acceptance.md` — критерии приемки фабрики.
- `50_nonfunctional.md` — NFR фабрики на уровне Dev/Test.
- `60_constraints.md` — ограничения, допущения, зависимости.
- `70_runbook.md` — операционный ранбук и сценарии восстановления.
- `80_adrs.md` — журнал архитектурных решений фабрики.
- `90_api.md` — внешние точки интеграции фабрики (триггеры, вебхуки, события).
- `99_glossary.md` — глоссарий.
- `_schemas/*.json` — схемы фронтматтера и служебных конфигов фабрики.

10. Границы ответственности по разделам гайда

- Детализация окружения, версий и инструментов — п.2.
- Скелет и метаданные документации — п.4–6.
- Политики качества/CI/CD — п.7, п.20–21.
- Политики данных/безопасности/SLO — п.10–11.
- Оркестратор и интеграции — п.12–13.
- UI и RBAC — п.22, аудит — п.25.
- Откаты и cleanup — п.26.
- Запуск E2E и ранбук — п.28–29.

11. Acceptance для пункта №1

- Документ `ANCHOR.md` заполнен разделами: Purpose, In/Out, Scope, Non-goals, Roles, Gates, ADR Policy, Links.
- Остальные документы созданы пустыми с фронтматтером и заголовками.
- В `80_adrs.md` занесены минимум 2 решения: выбор n8n как оркестратора, политика PR-only.
- Список входов/выходов и гейтов согласован и прикреплен ссылкой в `README.md`.
